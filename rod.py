import cv2
import numpy as np

# Define the two rotation matrices
R0 = np.array([[ 9.99922632e-01, -9.74968776e-04, -1.24008177e-02],
 [ 9.06382340e-04,  9.99984270e-01, -5.53521762e-03],
 [ 1.24060193e-02,  5.52354949e-03,  9.99907786e-01]]
)

R1 = np.array([[9.999910e-01, 1.048972e-03, -4.131348e-03],
                             [-1.058514e-03, 9.999968e-01, -3.462706e-03],
                             [4.128913e-03, 2.312456e-03, 9.999887e-01]])

r, _ = cv2.Rodrigues(R0.dot(R1.T))
rotation_error_from_identity = np.linalg.norm(r)
print("rotation_error_from_identity",rotation_error_from_identity)


translation1= [0.01035453, 0.01184955,  2.57988493]
translation2= [-9.374345e-02,-5.676064e-02,1.716275e+00]

# Ensure that the input matrices are numpy arrays
translation1 = np.array(translation1)
translation2 = np.array(translation2)
    
# Calculate the difference between the two translation matrices
difference = translation2 - translation1
    
# Calculate the Euclidean distance (norm) of the difference vector
error = np.linalg.norm(difference)
    
print("t:error", error)


'''
frame 3
----------------------------
[[ 9.99922632e-01 -9.74968776e-04 -1.24008177e-02]
 [ 9.06382340e-04  9.99984270e-01 -5.53521762e-03]
 [ 1.24060193e-02  5.52354949e-03  9.99907786e-01]]
self.cur_t [[0.01035453]
 [0.01184955]
 [2.57988493]]
frame:  5

[[ 0.99971122 -0.00120309 -0.02400078]
 [ 0.00106074  0.99998178 -0.00594275]
 [ 0.02400749  0.00591558  0.99969428]]
self.cur_t [[ 0.04280835]
 [-0.01138223]
 [ 4.29907257]]
frame:  6

----------------------------
[[ 0.99958087  0.00161788 -0.02890449]
 [-0.00184329  0.99996809 -0.00777334]
 [ 0.02889099  0.00782336  0.99955195]]
self.cur_t [[ 2.52865828e-02]
 [-3.99156221e-03]
 [ 5.15826018e+00]]
----------------------------
# outliers:  125
frame:  66
----------------------------
[[ 9.95211818e-01 -2.32576040e-02 -9.49342962e-02]
 [ 2.32686282e-02  9.99728758e-01 -9.91020031e-04]
 [ 9.49315947e-02 -1.22271599e-03  9.95483047e-01]]
self.cur_t [[-3.57108438]
 [-0.29416893]
 [61.99902374]]
----------------------------
frame:  67
----------------------------
[[ 9.95181509e-01 -1.94630486e-02 -9.60986644e-02]
 [ 1.95071970e-02  9.99809601e-01 -4.80143137e-04]
 [ 9.60897124e-02 -1.39678600e-03  9.95371697e-01]]
self.cur_t [[-3.66148761]
 [-0.28162037]
 [62.90826709]]
----------------------------
# outliers:  156
frame:  68
----------------------------
[[ 0.99525943 -0.01627487 -0.09588424]
 [ 0.01655687  0.99986062  0.00214611]
 [ 0.09583595 -0.00372348  0.99539018]]
self.cur_t [[-3.80323702]
 [-0.30501615]
 [63.79836054]]

----------------------------
f3:9.999910e-01 1.048972e-03 -4.131348e-03 -9.374345e-02 -1.058514e-03 9.999968e-01 -2.308104e-03 -5.676064e-02 4.128913e-03 2.312456e-03 9.999887e-01 1.716275e+00
f5:9.999637e-01 2.078471e-03 -8.263498e-03 -1.874858e-01 -2.116664e-03 9.999871e-01 -4.615826e-03 -1.135202e-01 8.253797e-03 4.633149e-03 9.999551e-01 3.432648e+00
f6:9.999433e-01 2.586172e-03 -1.033094e-02 -2.343818e-01 -2.645881e-03 9.999798e-01 -5.770163e-03 -1.419150e-01 1.031581e-02 5.797170e-03 9.999299e-01 4.291335e+00
f66:9.980242e-01 -1.762043e-03 -6.280674e-02 -3.641784e+00 1.227247e-03 9.999627e-01 -8.552514e-03 -2.021539e+00 6.281946e-02 8.458535e-03 9.979890e-01 6.109125e+01
f67:9.979547e-01 -9.592105e-04 -6.391830e-02 -3.703384e+00 5.024105e-05 9.998989e-01 -1.422089e-02 -2.049159e+00 6.392547e-02 1.418860e-02 9.978538e-01 6.200632e+01
f68:9.978643e-01 4.204986e-03 -6.518610e-02 -3.776035e+00 -5.092497e-03 9.998965e-01 -1.345487e-02 -2.078109e+00 6.512277e-02 1.375809e-02 9.977824e-01 6.291678e+01
'''
